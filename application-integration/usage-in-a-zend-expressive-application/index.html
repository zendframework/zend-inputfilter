<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Normalize and validate input sets from the web, APIs, the CLI, and more, including files.">  
    <link rel="canonical" href="https://docs.zendframework.com/application-integration/usage-in-a-zend-expressive-application/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Usage in a zend-expressive application - zend-inputfilter - Zend Framework Docs</title>

    <link rel="stylesheet" href="/css/styles.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">zend-inputfilter</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../specs/" class="subnavigation__link">Specifications</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../file-input/" class="subnavigation__link">File Upload Input</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../optional-input-filters/" class="subnavigation__link">Optional Input Filters</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../unfiltered-data/" class="subnavigation__link">Unfiltered Data</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Application Integration</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../usage-in-a-zend-mvc-application/" class="subnavigation__link">Usage in a zend-mvc application</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Usage in a zend-expressive application</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-inputfilter</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-inputfilter/" class="header__link header__link--github" title="Go to repository of zend-inputfilter">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="laminas-announcement">
    <div class="container">
        <div class="row">
            <div class="col-xs-12"><strong>
                This package has moved. Visit its replacement, <a href="https://docs.laminas.dev/laminas-inputfilter/">laminas/laminas-inputfilter.</a>
            </strong></div>
        </div>
    </div>
</div>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
    <li><a href="https://framework.zend.com/">Home</a></li>

    
        <li><a href="https://docs.zendframework.com/">Documentation</a></li>

        
            <li><a href="../..">zend-inputfilter</a></li>

            
                
                    
                    
                        <li>Application Integration</li>
                    
                
            

            <li class="active">Usage in a zend-expressive application</li>
        
    
</ol>






    
    
        <h2 class="chapter__headline">Application Integration</h2>
    

    <div>
        
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#create-input-filter" class="toc__link">Create Input Filter</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#using-input-filter" class="toc__link">Using Input Filter</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#register-input-filter-and-handler" class="toc__link">Register Input Filter and Handler</a>
                    </li>
                
            </ul>
        </div>
    

    </div>

    <h1 id="usage-in-a-zend-expressive-application">Usage in a zend-expressive Application</h1>
<p>The following example shows <em>one</em> potential use case of zend-inputfilter within
a zend-expressive based application. The example uses a module, config provider
configuration, zend-servicemanager as dependency injection container, the
zend-inputfilter plugin manager and a request handler.</p>
<p>Before starting, make sure zend-inputfilter is installed and configured.</p>
<h2 id="create-input-filter">Create Input Filter</h2>
<p>Create an input filter as separate class, e.g.
<code>src/Album/InputFilter/QueryInputFilter.php</code>:</p>
<pre><code class="language-php">namespace Album\InputFilter;

use Zend\Filter\ToInt;
use Zend\I18n\Validator\IsInt;
use Zend\InputFilter\InputFilter;

class QueryInputFilter extends InputFilter
{
    public function init()
    {
        // Page
        $this-&gt;add(
            [
                'name'              =&gt; 'page',
                'allow_empty'       =&gt; true,
                'validators'        =&gt; [
                    [
                        'name' =&gt; IsInt::class,                        
                    ],                    
                ],
                'filters'           =&gt; [
                    [
                        'name' =&gt; ToInt::class,
                    ],
                ],
                'fallback_value'    =&gt; 1,
            ]
        );

        // …
    }
}
</code></pre>

<h2 id="using-input-filter">Using Input Filter</h2>
<h3>Create Handler</h3>
<p>Using the input filter in a request handler, e.g.
<code>src/Album/Handler/ListHandler.php</code>:</p>
<pre><code class="language-php">namespace Album\Handler;

use Album\InputFilter\QueryInputFilter;
use Psr\Http\Message\ServerRequestInterface;
use Psr\Http\Server\RequestHandlerInterface;
use Psr\Http\Message\ResponseInterface;
use Zend\InputFilter\InputFilterInterface;
use Zend\Expressive\Template\TemplateRendererInterface;

class ListHandler implements RequestHandlerInterface
{
    /** @var InputFilterInterface */
    private $inputFilter;

    /** @var TemplateRendererInterface */
    private $renderer;

    public function __construct(
        InputFilterInterface $inputFilter,
        TemplateRendererInterface $renderer
    ) {
        $this-&gt;inputFilter = $inputFilter;
        $this-&gt;renderer    = $renderer;
    }

    public function handle(ServerRequestInterface $request) : ResponseInterface
    {
        $this-&gt;inputFilter-&gt;setData($request-&gt;getQueryParams());
        $this-&gt;inputFilter-&gt;isValid();
        $filteredParams = $this-&gt;inputFilter-&gt;getValues();

        // …

        return new HtmlResponse($this-&gt;renderer-&gt;render(
            'album::list',
            []
        ));
    }
}
</code></pre>

<h3>Create Factory for Handler</h3>
<p>Fetch the <code>QueryInputFilter</code> from the input filter plugin manager in a factory,
e.g. <code>src/Album/Handler/ListHandlerFactory.php</code>:</p>
<pre><code class="language-php">namespace Album\Handler;

use Album\InputFilter\QueryInputFilter;
use Psr\Container\ContainerInterface;
use Zend\InputFilter\InputFilterPluginManager;

class ListHandlerFactory
{
    public function __invoke(ContainerInterface $container)
    {
        /** @var InputFilterPluginManager $pluginManager */
        $pluginManager = $container-&gt;get(InputFilterPluginManager::class);
        $inputFilter   = $pluginManager-&gt;get(QueryInputFilter::class);

        return new ListHandler(
            $inputFilter,
            $container-&gt;get(TemplateRendererInterface::class)
        );
    }
}
</code></pre>

<blockquote>
<h3>Instantiating the InputFilter</h3>
<p>The <code>InputFilterPluginManager</code> is used instead of directly instantiating the
input filter to ensure to get the filter and validator plugin managers
injected. This allows usage of any filters and validators registered with
their respective plugin managers.</p>
<p>Additionally the <code>InputFilterPluginManager</code> calls the <code>init</code> method <em>after</em>
instantiating the input filter, ensuring all dependencies are fully injected
first.</p>
</blockquote>
<h2 id="register-input-filter-and-handler">Register Input Filter and Handler</h2>
<p>Extend the configuration provider of the module to register the input filter and
the request handler, e.g. <code>src/Album/ConfigProvider.php</code>:</p>
<pre><code class="language-php">namespace Album;

class ConfigProvider
{
    public function __invoke() : array
    {
        return [
            'dependencies'  =&gt; $this-&gt;getDependencies(),
            'input_filters' =&gt; $this-&gt;getInputFilters(), // &lt;-- Add this line
        ];
    }

    public function getDependencies() : array
    {
        return [
            'factories' =&gt; [
                Handler\ListHandler::class =&gt; Handler\ListHandlerFactory::class, // &lt;-- Add this line
                // …
            ],
        ];
    }

    // Add the following method
    public function getInputFilters() : array
    {
        return [
            'factories' =&gt; [
                InputFilter\QueryInputFilter::class =&gt; InvokableFactory::class,
            ],
        ];
    }

    // …
}
</code></pre>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../usage-in-a-zend-mvc-application/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/zendframework/zend-inputfilter/edit/master/docs/book/application-integration/usage-in-a-zend-expressive-application.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">zend-inputfilter</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../specs/" class="subnavigation__link">Specifications</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../file-input/" class="subnavigation__link">File Upload Input</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../optional-input-filters/" class="subnavigation__link">Optional Input Filters</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../unfiltered-data/" class="subnavigation__link">Unfiltered Data</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Application Integration</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../usage-in-a-zend-mvc-application/" class="subnavigation__link">Usage in a zend-mvc application</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Usage in a zend-expressive application</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2020 by <a href="https://www.zend.com/">Zend</a> by <a href="https://www.perforce.com/">Perforce</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://laminas.dev/chat/" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

<nav class="cookie-bar navbar navbar-fixed-bottom navbar-default hidden">
    <div class="container">
        <p class="navbar-text">
            We use cookies to allow you to dismiss dialogs such as the Laminas
            Project notification.
        </p>
        <button type="button" class="cookie-button btn btn-default navbar-btn">Allow Cookies</button>
    </div>
</nav>

    <script>
        var base_url = '../..',
            siteName = 'zend-inputfilter';
    </script>
    <script src="/js/scripts.js"></script>
    <script src="../../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
