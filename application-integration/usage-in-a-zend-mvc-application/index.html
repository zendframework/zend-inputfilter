<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Normalize and validate input sets from the web, APIs, the CLI, and more, including files.">  
    <link rel="canonical" href="https://docs.zendframework.com/zend-inputfilter/application-integration/usage-in-a-zend-mvc-application/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Usage in a zend-mvc application - zend-inputfilter - Zend Framework Docs</title>

    <link rel="stylesheet" href="../../css/styles-5cfabd53ee.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">zend-inputfilter</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../specs/" class="subnavigation__link">Specifications</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../file-input/" class="subnavigation__link">File Upload Input</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../optional-input-filters/" class="subnavigation__link">Optional Input Filters</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../unfiltered-data/" class="subnavigation__link">Unfiltered Data</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Application Integration</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Usage in a zend-mvc application</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../usage-in-a-zend-expressive-application/" class="subnavigation__link">Usage in a zend-expressive application</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-inputfilter</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-inputfilter/" class="header__link header__link--github" title="Go to repository of zend-inputfilter">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="laminas-announcement">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                Zend Framework transitions to the Linux Foundation. <a href="https://getlaminas.org">Learn More.</a>
            </div>
        </div>
    </div>
</div>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
    <li><a href="https://framework.zend.com/">Home</a></li>

    
        <li><a href="https://docs.zendframework.com/">Documentation</a></li>

        
            <li><a href="../..">zend-inputfilter</a></li>

            
                
                    
                    
                        <li>Application Integration</li>
                    
                
            

            <li class="active">Usage in a zend-mvc application</li>
        
    
</ol>






    
    
        <h2 class="chapter__headline">Application Integration</h2>
    

    <div>
        
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#create-input-filter" class="toc__link">Create Input Filter</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#using-input-filter" class="toc__link">Using Input Filter</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#register-input-filter-and-controller" class="toc__link">Register Input Filter and Controller</a>
                    </li>
                
            </ul>
        </div>
    

    </div>

    <h1 id="usage-in-a-zend-mvc-application">Usage in a zend-mvc Application</h1>
<p>The following example shows <em>one</em> potential use case of zend-inputfilter within
a zend-mvc based application. The example uses a module, a controller and the
zend-inputfilter plugin manager.</p>
<p>Before starting, make sure zend-inputfilter is installed and configured.</p>
<h2 id="create-input-filter">Create Input Filter</h2>
<p>Create an input filter as separate class, e.g.
<code>module/Album/src/InputFilter/QueryInputFilter.php</code>:</p>
<p> <pre class=codehilite><code class=language-php>namespace Album\InputFilter;

use Zend\Filter\ToInt;
use Zend\I18n\Validator\IsInt;
use Zend\InputFilter\InputFilter;

class QueryInputFilter extends InputFilter
{
    public function init()
    {
        // Page
        $this-&gt;add(
            [
                'name'              =&gt; 'page',
                'allow_empty'       =&gt; true,
                'validators'        =&gt; [
                    [
                        'name' =&gt; IsInt::class,                        
                    ],                    
                ],
                'filters'           =&gt; [
                    [
                        'name' =&gt; ToInt::class,
                    ],
                ],
                'fallback_value'    =&gt; 1,
            ]
        );

        // …
    }
}</code></pre></p>
<h2 id="using-input-filter">Using Input Filter</h2>
<h3>Create Controller</h3>
<p>Using the input filter in a controller, e.g.
<code>module/Album/Controller/AlbumController.php</code>:</p>
<p> <pre class=codehilite><code class=language-php>namespace Album\Controller;

use Album\InputFilter\QueryInputFilter;
use Zend\InputFilter\InputFilterInterface;
use Zend\Mvc\Controller\AbstractActionController;

class AlbumController extends AbstractActionController
{
    /** @var InputFilterInterface */
    private $inputFilter;

    public function __construct(InputFilterInterface $inputFilter)
    {
        $this-&gt;inputFilter = $inputFilter;        
    }

    public function indexAction()
    {
        $this-&gt;inputFilter-&gt;setData($this-&gt;getRequest()-&gt;getQuery());
        $this-&gt;inputFilter-&gt;isValid();
        $filteredParams = $this-&gt;inputFilter-&gt;getValues();

        // …
    }
}</code></pre></p>
<h3>Create Factory for Controller</h3>
<p>Fetch the <code>QueryInputFilter</code> from the input filter plugin manager in a factory,
e.g. <code>src/Album/Handler/ListHandlerFactory.php</code>:</p>
<p> <pre class=codehilite><code class=language-php>namespace Album\Controller;

use Album\InputFilter\QueryInputFilter;
use Interop\Container\ContainerInterface;
use Zend\InputFilter\InputFilterPluginManager;
use Zend\ServiceManager\Factory\FactoryInterface;

class AlbumControllerFactory implements FactoryInterface
{
    public function __invoke(
        ContainerInterface $container,
        $requestedName,
        array $options = null
    ) {
        /** @var InputFilterPluginManager $pluginManager */
        $pluginManager = $container-&gt;get(InputFilterPluginManager::class);
        $inputFilter   = $pluginManager-&gt;get(QueryInputFilter::class);

        return new AlbumController($inputFilter);
    }
}</code></pre></p>
<blockquote>
<h3>Instantiating the Input Filter</h3>
<p>The <code>InputFilterPluginManager</code> is used instead of directly instantiating the
input filter to ensure to get the filter and validator plugin managers
injected. This allows usage of any filters and validators registered with
their respective plugin managers.</p>
<p>Additionally the <code>InputFilterPluginManager</code> calls the <code>init</code> method <em>after</em>
instantiating the input filter, ensuring all dependencies are fully injected
first.</p>
</blockquote>
<h2 id="register-input-filter-and-controller">Register Input Filter and Controller</h2>
<p>Extend the configuration of the module to register the input filter and
controller in the application, e.g. <code>module/Album/config/module.config.php</code>:</p>
<p> <pre class=codehilite><code class=language-php>namespace Album;

use Zend\ServiceManager\Factory\InvokableFactory;

return [
    'controllers' =&gt; [
        'factories' =&gt; [
            // Add this line
            Controller\AlbumController::class =&gt; Controller\AlbumControllerFactory::class,
        ],
    ],
    // Add the following array
    'input_filters' =&gt; [
        'factories =&gt; [
            InputFilter\QueryInputFilter::class =&gt; InvokableFactory::class,
        ],
    ],
    // …
];</code></pre></p>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../../unfiltered-data/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../usage-in-a-zend-expressive-application/">
                    Next <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/zendframework/zend-inputfilter/edit/master/docs/book/application-integration/usage-in-a-zend-mvc-application.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">zend-inputfilter</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../specs/" class="subnavigation__link">Specifications</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../file-input/" class="subnavigation__link">File Upload Input</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../optional-input-filters/" class="subnavigation__link">Optional Input Filters</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../../unfiltered-data/" class="subnavigation__link">Unfiltered Data</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Application Integration</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Usage in a zend-mvc application</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../usage-in-a-zend-expressive-application/" class="subnavigation__link">Usage in a zend-expressive application</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2019 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://tinyletter.com/mwopzend" class="support__link" title="Newsletter"><i class="fa fa-envelope"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script>
        var base_url = '../..',
            siteName = 'zend-inputfilter';
    </script>
    <script src="../../js/scripts-8d7ae56abf.js"></script>
        <script src="../../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
